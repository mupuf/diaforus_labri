<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE network SYSTEM '../network.dtd'>
<network failure_handling="false" pubsub_reliable="true">
    <build>
        <!--	path: filepath to the make binary (optional)
			args: parameters you can specify for make (optional)
			root: the directory that contains the Makefile
			output: the binary file generated by the project
		-->
        <make output="diaforus_final_code" root="build/" target="host" args="-j8"/>
        <debug pubsub="true" uip="false" sicslowpan="false" rpl="false" wavesim="false" coap="false" reasoning="true"/>
        <application name="REASONING"/>
    </build>
    <coap_groups>
        <group name="reasoning1">
            <resource name="intrusion_duration"/>
            <resource name="latency_mode"/>
        </group>
        <group name="reasoning2">
            <resource name="hist_analyze_per"/>
            <resource name="criticality_lvl"/>
            <resource name="history"/>
            <resource name="alert_alarm_ratio"/>
        </group>
        <group name="rpl">
            <resource name="rpl_neighbors"/>
            <resource name="rpl_rank"/>
            <resource name="rpl_num_routes"/>
            <resource name="rpl_num_tra_mess"/>
            <resource name="rpl_num_rec_mess"/>
        </group>
        <group name="allnodes">
            <resource name="num_tra_packets"/>
            <resource name="num_rec_packets"/>
            <resource name="nodeid"/>
        </group>
    </coap_groups>
    <!-- Zone 1 -->
    <node target="host" simulation="true" id="20" area="1" name="node root reasoning 1">
        <firmware name="node_20"/>
        <phy x="910" y="865" range="900"/>
        <energy startup="1600" alarm="100"/>
        <pubsub enable="true"/>
        <coap enable="true">
            <group name="reasoning2"/>
            <group name="rpl"/>
            <group name="allnodes"/>
        </coap>
        <!-- The parameters to control the reasoning (level 1 and level 2) -->
        <reasoning latency_mode="green" max_intrusion_duration="20" min_intrusion_duration="2">
            <!-- This node is the reasoning node -->
            <reasoning_node log_analyse_period="1440"/>
        </reasoning>
        <sensors/>
    </node>
    <node target="host" simulation="true" id="2" area="1" name="node pir 2-1">
        <firmware name="node_2"/>
        <phy x="786" y="856" range="900"/>
        <energy startup="1600" alarm="100"/>
        <pubsub enable="true"/>
        <coap enable="true">
            <group name="reasoning1"/>
            <group name="rpl"/>
            <group name="allnodes"/>
        </coap>
        <reasoning latency_mode="green" max_intrusion_duration="20" min_intrusion_duration="2"/>
        <sensors>
            <modality type="PIR">
                <sensor period="200" reemission_delay="3001" type="digital" id="0" delay="0">
                    <gpio pin="2"/>
                    <value abs_threshold="1" rel_threshold="1" invert="false"/>
                    <position x="738" y="798" z_rotation="-110"/>
                </sensor>
            </modality>
        </sensors>
    </node>
    <node target="host" simulation="true" id="5" area="1" name="node pir 2-1">
        <firmware name="node_5"/>
        <phy x="846" y="743" range="900"/>
        <energy startup="1600" alarm="100"/>
        <pubsub enable="true"/>
        <coap enable="true">
            <group name="reasoning1"/>
            <group name="rpl"/>
            <group name="allnodes"/>
        </coap>
        <reasoning latency_mode="green" max_intrusion_duration="20" min_intrusion_duration="2"/>
        <sensors>
            <modality type="SEISMIC">
                <sensor period="200" reemission_delay="3001" type="digital" id="0" delay="0">
                    <gpio pin="2"/>
                    <value abs_threshold="1" rel_threshold="1" invert="false"/>
                    <position x="819" y="719" z_rotation="155"/>
                </sensor>
            </modality>
        </sensors>
    </node>
    <node target="host" simulation="true" id="3" area="1" name="node pir 3-1">
        <firmware name="node_3"/>
        <phy x="956" y="799" range="900"/>
        <energy startup="1600" alarm="100"/>
        <pubsub enable="true"/>
        <coap enable="true">
            <group name="reasoning1"/>
            <group name="rpl"/>
            <group name="allnodes"/>
        </coap>
        <reasoning latency_mode="green" max_intrusion_duration="20" min_intrusion_duration="2"/>
        <sensors>
            <modality type="PIR">
                <sensor period="200" reemission_delay="3001" type="digital" id="0" delay="0">
                    <gpio pin="2"/>
                    <value abs_threshold="1" rel_threshold="1" invert="false"/>
                    <position x="905" y="738" z_rotation="-110"/>
                </sensor>
            </modality>
        </sensors>
    </node>
    <!-- Zone 2-->
    <node target="host" simulation="true" id="1" area="2" name="gateway">
        <emblem source="c2.png"/>
        <firmware name="node_1"/>
        <phy x="1138" y="863" range="900"/>
        <energy startup="1600" alarm="100"/>
        <rpl prefix="1180:0000:0000:0000"/>
        <pubsub enable="true" broker="true"/>
        <coap enable="true">
            <group name="rpl"/>
            <group name="allnodes"/>
        </coap>
        <gateway port="1235"/>
        <!-- The parameters to control the reasoning (level 1 and level 2) -->
        <reasoning latency_mode="green" max_intrusion_duration="20" min_intrusion_duration="2"/>
        <sensors/>
    </node>
    <node target="host" simulation="true" id="21" area="2" name="node pir 1-2">
        <firmware name="node_21"/>
        <phy x="1174" y="632" range="900"/>
        <energy startup="1600" alarm="100"/>
        <pubsub enable="true"/>
        <coap enable="true">
            <group name="reasoning1"/>
            <group name="rpl"/>
            <group name="allnodes"/>
        </coap>
        <reasoning latency_mode="green" max_intrusion_duration="20" min_intrusion_duration="2"/>
        <sensors>
            <modality type="SEISMIC">
                <sensor period="200" reemission_delay="5001" type="digital" id="0" delay="0">
                    <gpio pin="3"/>
                    <value abs_threshold="1" rel_threshold="1" invert="false"/>
                    <position x="1121" y="614" z_rotation="80"/>
                </sensor>
            </modality>
        </sensors>
    </node>
    <node target="host" simulation="true" id="22" area="2" name="node pir 2-2">
        <firmware name="node_22"/>
        <phy x="1350" y="585" range="900"/>
        <energy startup="1600" alarm="100"/>
        <rpl>
        </rpl>
        <pubsub enable="true"/>
        <coap enable="true">
            <group name="reasoning1"/>
            <group name="rpl"/>
            <group name="allnodes"/>
        </coap>
        <reasoning latency_mode="green" max_intrusion_duration="20" min_intrusion_duration="2"/>
        <parameter value="WITH_SPIRIT" name="HW_MODALITY"/>
        <parameter value="-240" name="M_FREQ_OFFSET"/>
        <sensors>
            <modality type="SPIRIT">
                <sensor period="100" reemission_delay="1001" type="digital" id="0" delay="0">
                    <gpio pin="0"/>
                    <value abs_threshold="1" rel_threshold="1" invert="false"/>
                    <position x="1354" y="561" z_rotation="0"/>
                </sensor>
            </modality>
        </sensors>
    </node>
    <node target="host" simulation="true" id="23" area="2" name="node pir 2-2">
        <firmware name="node_23"/>
        <phy x="1289" y="680" range="900"/>
        <energy startup="1600" alarm="100"/>
        <pubsub enable="true"/>
        <coap enable="true">
            <group name="reasoning1"/>
            <group name="rpl"/>
            <group name="allnodes"/>
        </coap>
        <reasoning latency_mode="green" max_intrusion_duration="20" min_intrusion_duration="2"/>
        <parameter value="WITH_SPIRIT" name="HW_MODALITY"/>
        <parameter value="-96" name="M_FREQ_OFFSET"/>
        <sensors>
            <modality type="SEISMIC">
                <sensor period="500" reemission_delay="3001" type="digital" id="0" delay="0">
                    <gpio pin="0"/>
                    <value abs_threshold="1" rel_threshold="1" invert="false"/>
                    <position x="1244" y="590" z_rotation="190"/>
                </sensor>
            </modality>
        </sensors>
    </node>
    <node target="host" simulation="true" id="4" area="2" name="node buzzer 4">
        <emblem source="buzzer.png"/>
        <firmware name="node_4"/>
        <phy x="1374" y="687" range="900"/>
        <energy startup="1600" alarm="100"/>
        <pubsub enable="true"/>
        <coap enable="true">
            <group name="reasoning2"/>
            <group name="reasoning1"/>
            <group name="rpl"/>
            <group name="allnodes"/>
        </coap>
        <reasoning latency_mode="green" max_intrusion_duration="20" min_intrusion_duration="2">
            <!-- This node is the reasoning node -->
            <reasoning_node log_analyse_period="1440"/>
            <!-- in minutes -->
            <!-- <monitored_area area="1" average_crossing_duration="20"/> -->
        </reasoning>
        <parameter value="NO_DEMOBOARD" name="HW_MODALITY"/>
        <parameter value="-96" name="M_FREQ_OFFSET"/>
        <sensors/>
    </node>
</network>
